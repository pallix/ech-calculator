"use strict";
var Prelude = require("../Prelude");
var Control_Monad_Eff = require("../Control.Monad.Eff");
var DOM = require("../DOM");
var Data_Maybe = require("../Data.Maybe");
var Signal_Channel = require("../Signal.Channel");
var Partial_Unsafe = require("../Partial.Unsafe");
var Graphics_Drawing = require("../Graphics.Drawing");
var Graphics_Canvas = require("../Graphics.Canvas");
var Flare = require("../Flare");
var Control_Bind = require("../Control.Bind");

/**
 *  | Renders a Flare UI with a `Drawing` as output. The first ID specifies
 *  | the DOM element for the controls while the second ID specifies the
 *  | canvas for rendering.
 */
var runFlareDrawing = function (controls) {
    return function (canvasID) {
        return function (ui) {
            return function __do() {
                var v = Graphics_Canvas.getCanvasElementById(canvasID)();
                var canvas = Partial_Unsafe.unsafePartial(function (dictPartial) {
                    return Data_Maybe.fromJust(dictPartial)(v);
                });
                var v1 = Graphics_Canvas.getContext2D(canvas)();
                var v2 = Graphics_Canvas.getCanvasWidth(canvas)();
                var v3 = Graphics_Canvas.getCanvasHeight(canvas)();
                var render$prime = function (drawing) {
                    return function __do() {
                        Graphics_Canvas.clearRect(v1)({
                            x: 0.0, 
                            y: 0.0, 
                            w: v2, 
                            h: v3
                        })();
                        return Graphics_Drawing.render(v1)(drawing)();
                    };
                };
                return Flare.runFlareWith(controls)(render$prime)(ui)();
            };
        };
    };
};
module.exports = {
    runFlareDrawing: runFlareDrawing
};
